<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- conanfile-probe.qdoc -->
  <title>ConanfileProbe QML Type | Qbs Manual</title>
</head>
<body>
<li><a href="index.html">Qbs Manual</a></li>
<li id="buildversion">Qbs 1.21-0</li>
<div class="sidebar">
<div class="toc">
<h3><a name="toc">Contents</a></h3>
<ul>
<li class="level1"><a href="#properties">Properties</a></li>
<li class="level1"><a href="#details">Detailed Description</a></li>
<li class="level2"><a href="#examples">Examples</a></li>
<li class="level3"><a href="#including-files-generated-by-conan">Including Files Generated by Conan</a></li>
<li class="level3"><a href="#setting-module-properties-in-products">Setting Module Properties in Products</a></li>
<li class="level3"><a href="#setting-up-a-profile">Setting Up a Profile</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">ConanfileProbe QML Type</h1>
<span class="subtitle"></span>
<!-- $$$ConanfileProbe-brief -->
<p>Extracts information about dependencies from a Conan recipe file. <a href="#details">More...</a></p>
<!-- @@@ConanfileProbe -->
<div class="table"><table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> Import Statement:</td><td class="memItemRight bottomAlign"> import QbsProbes .</td></tr></table></div><ul>
<li><a href="qml-qbsprobes-conanfileprobe-members.html">List of all members, including inherited members</a></li>
</ul>
<a name="properties"></a>
<h2 id="properties">Properties</h2>
<ul>
<li class="fn"><b><b><a href="qml-qbsprobes-conanfileprobe.html#additionalArguments-prop">additionalArguments</a></b></b> : stringList</li>
<li class="fn"><b><b><a href="qml-qbsprobes-conanfileprobe.html#conanfilePath-prop">conanfilePath</a></b></b> : path</li>
<li class="fn"><b><b><a href="qml-qbsprobes-conanfileprobe.html#dependencies-prop">dependencies</a></b></b> : var</li>
<li class="fn"><b><b><a href="qml-qbsprobes-conanfileprobe.html#executable-prop">executable</a></b></b> : path</li>
<li class="fn"><b><b><a href="qml-qbsprobes-conanfileprobe.html#generatedFilesPath-prop">generatedFilesPath</a></b></b> : path</li>
<li class="fn"><b><b><a href="qml-qbsprobes-conanfileprobe.html#generators-prop">generators</a></b></b> : stringList</li>
<li class="fn"><b><b><a href="qml-qbsprobes-conanfileprobe.html#json-prop">json</a></b></b> : var</li>
<li class="fn"><b><b><a href="qml-qbsprobes-conanfileprobe.html#options-prop">options</a></b></b> : var</li>
<li class="fn"><b><b><a href="qml-qbsprobes-conanfileprobe.html#packageReference-prop">packageReference</a></b></b> : string</li>
<li class="fn"><b><b><a href="qml-qbsprobes-conanfileprobe.html#settings-prop">settings</a></b></b> : var</li>
</ul>
<!-- $$$ConanfileProbe-description -->
<a name="details"></a>
<h2 id="details">Detailed Description</h2>
<p>The <code>ConanfileProbe</code> interfaces Qbs to the <a href="https://conan.io/">Conan package manager</a>. It runs <a href="https://docs.conan.io/en/latest/reference/commands/consumer/install.html">conan install</a> on a Conan recipe file such as <code>conanfile.py</code> or <code>conanfile.txt</code> and extracts all available meta information about package dependencies using the <a href="https://docs.conan.io/en/latest/reference/generators/json.html">json generator</a>. The output may be used to set up <a href="qml-qbslanguageitems-profile.html">Profile</a> items or module properties in products. <code>ConanfileProbe</code> can also be used to run other Conan generators and to retrieve their output.</p>
<a name="examples"></a>
<h2 id="examples">Examples</h2>
<p>In the following examples we assume that our project contains a <code>conanfile.py</code>. This file describes all dependencies of our project. The dependency packages are expected to export meta information to be consumed by our project.</p>
<a name="including-files-generated-by-conan"></a>
<h3 id="including-files-generated-by-conan">Including Files Generated by Conan</h3>
<p>Conan has a built-in <a href="https://docs.conan.io/en/latest/reference/generators/qbs.html">qbs generator</a> that creates a project file containing dummy products. This is the easiest way to access dependencies, but also the least flexible one. It requires each Conan package to export correct meta information and works only if the dependency is a library.</p>
<pre class="qml">import qbs.Probes

<span class="type"><a href="qml-qbslanguageitems-project.html">Project</a></span> {
    <span class="type">Probes</span>.ConanfileProbe {
        <span class="name">id</span>: <span class="name">conan</span>
        <span class="name">conanfilePath</span>: <span class="name">project</span>.<span class="name">sourceDirectory</span> <span class="operator">+</span> <span class="string">&quot;/conanfile.py&quot;</span>
        <span class="name">generators</span>: <span class="string">&quot;qbs&quot;</span>
    }

    <span class="name">references</span>: <span class="name">conan</span>.<span class="name">generatedFilesPath</span> <span class="operator">+</span> <span class="string">&quot;/conanbuildinfo.qbs&quot;</span>

    <span class="type"><a href="qml-qbsconvenienceitems-cppapplication.html">CppApplication</a></span> {
        <span class="name">type</span>: <span class="string">&quot;application&quot;</span>
        <span class="name">files</span>: <span class="string">&quot;main.cpp&quot;</span>
        <span class="type"><a href="qml-qbslanguageitems-depends.html">Depends</a></span> { <span class="name">name</span>: <span class="string">&quot;mylib&quot;</span> }
    }
}</pre>
<a name="setting-module-properties-in-products"></a>
<h3 id="setting-module-properties-in-products">Setting Module Properties in Products</h3>
<p>When a product depends on a Conan package that does not have a dedicated <a href="qbsmodules-qmlmodule.html">module</a>, package meta information may be directly fed into the <a href="qml-qbsmodules-cpp.html">cpp</a> module.</p>
<p>This approach is very flexible.</p>
<pre class="qml">import qbs.Probes

CppApplication {
    Probes.ConanfileProbe {
        id: conan
        conanfilePath: product.sourceDirectory + &quot;/conanfile.py&quot;
        options: ({opt1: &quot;True&quot;; opt2: &quot;TheValue&quot;})
    }
    cpp.includePaths: conan.dependencies[&quot;myLib&quot;].include_paths
    cpp.libraryPaths: conan.dependencies[&quot;myLib&quot;].lib_paths
    cpp.dynamicLibraries: conan.dependencies[&quot;mylib&quot;].libs
}</pre>
<a name="setting-up-a-profile"></a>
<h3 id="setting-up-a-profile">Setting Up a Profile</h3>
<p>When multiple products depend on one or more Conan packages, the dependency information may be combined in a <a href="qml-qbslanguageitems-profile.html">Profile</a>. This is especially useful when Qbs modules are available for some of the packages, but some of their properties need to be initialized. Otherwise, it would have to be done manually in global profiles.</p>
<pre class="qml">import qbs.Probes

<span class="type"><a href="qml-qbslanguageitems-project.html">Project</a></span> {
    <span class="type">Probes</span>.ConanfileProbe {
        <span class="name">id</span>: <span class="name">conan</span>
        <span class="name">conanfilePath</span>: <span class="name">project</span>.<span class="name">sourceDirectory</span> <span class="operator">+</span> <span class="string">&quot;/conanfile.py&quot;</span>
    }
    <span class="type"><a href="qml-qbslanguageitems-profile.html">Profile</a></span> {
        <span class="name">name</span>: <span class="string">&quot;arm-gcc&quot;</span>
        <span class="name">cpp</span>.toolchainInstallPath: <span class="name">conan</span>.<span class="name">dependencies</span>[<span class="string">&quot;arm-none-eabi-gcc&quot;</span>].<span class="name">rootpath</span> <span class="operator">+</span> <span class="string">&quot;/bin&quot;</span>
        <span class="name">cpp</span>.toolchainPrefix: <span class="string">&quot;arm-linux-gnueabi-&quot;</span>
        <span class="name">qbs</span>.toolchainType: <span class="string">&quot;gcc&quot;</span>
    }
}</pre>
<p>This allows fully automated dependency management, including compiler toolchains and is very useful when teams work in heterougeneous environments.</p>
<!-- @@@ConanfileProbe -->
<h2>Property Documentation</h2>
<!-- $$$additionalArguments -->
<div class="qmlitem"><div class="qmlproto">
<div class="table"><table class="qmlname">
<tr valign="top" class="odd" id="additionalArguments-prop">
<td class="tblQmlPropNode"><p>
<a name="additionalArguments-prop"></a><span class="name">additionalArguments</span> : <span class="type">stringList</span></p></td></tr>
</table></div></div>
<div class="qmldoc"><p>Additional command line arguments that are appended to the <code>conan install</code> command.</p>
<p>Default: []</p>
</div></div><!-- @@@additionalArguments -->
<br/>
<!-- $$$conanfilePath -->
<div class="qmlitem"><div class="qmlproto">
<div class="table"><table class="qmlname">
<tr valign="top" class="odd" id="conanfilePath-prop">
<td class="tblQmlPropNode"><p>
<a name="conanfilePath-prop"></a><span class="name">conanfilePath</span> : <span class="type">path</span></p></td></tr>
</table></div></div>
<div class="qmldoc"><p>Path to a <code>conanfile.py</code> or <code>conanfile.txt</code> that is used by this probe.</p>
<p>This property cannot be set at the same time as <a href="qml-qbsprobes-conanfileprobe.html#packageReference-prop">packageReference</a>.</p>
<p>Default: Undefined</p>
</div></div><!-- @@@conanfilePath -->
<br/>
<!-- $$$dependencies -->
<div class="qmlitem"><div class="qmlproto">
<div class="table"><table class="qmlname">
<tr valign="top" class="odd" id="dependencies-prop">
<td class="tblQmlPropNode"><p>
<a name="dependencies-prop"></a><span class="qmlreadonly">[read-only] </span><span class="name">dependencies</span> : <span class="type">var</span></p></td></tr>
</table></div></div>
<div class="qmldoc"><p>This property contains the same information as <a href="qml-qbsprobes-conanfileprobe.html#json-prop">json</a>.dependencies, but instead of an array, <code>dependencies</code> is a map with package names as keys for convenient access.</p>
<p>Default: Undefined</p>
</div></div><!-- @@@dependencies -->
<br/>
<!-- $$$executable -->
<div class="qmlitem"><div class="qmlproto">
<div class="table"><table class="qmlname">
<tr valign="top" class="odd" id="executable-prop">
<td class="tblQmlPropNode"><p>
<a name="executable-prop"></a><span class="name">executable</span> : <span class="type">path</span></p></td></tr>
</table></div></div>
<div class="qmldoc"><p>The name of or the path to the Conan executable.</p>
<p>Default: &quot;conan.exe&quot; on Windows, &quot;conan&quot; otherwise</p>
</div></div><!-- @@@executable -->
<br/>
<!-- $$$generatedFilesPath -->
<div class="qmlitem"><div class="qmlproto">
<div class="table"><table class="qmlname">
<tr valign="top" class="odd" id="generatedFilesPath-prop">
<td class="tblQmlPropNode"><p>
<a name="generatedFilesPath-prop"></a><span class="qmlreadonly">[read-only] </span><span class="name">generatedFilesPath</span> : <span class="type">path</span></p></td></tr>
</table></div></div>
<div class="qmldoc"><p>The path of the folder where Conan generators store their files. Each instance of this probe creates a unique folder under <a href="qml-qbslanguageitems-project.html#buildDirectory-prop">Project.buildDirectory</a>. The folder name is a hash of the arguments supplied to <code>conan install</code>.</p>
<p>Default: Undefined</p>
</div></div><!-- @@@generatedFilesPath -->
<br/>
<!-- $$$generators -->
<div class="qmlitem"><div class="qmlproto">
<div class="table"><table class="qmlname">
<tr valign="top" class="odd" id="generators-prop">
<td class="tblQmlPropNode"><p>
<a name="generators-prop"></a><span class="name">generators</span> : <span class="type">stringList</span></p></td></tr>
</table></div></div>
<div class="qmldoc"><p>Conan generators to be executed by this probe. The <a href="https://docs.conan.io/en/latest/reference/generators/json.html">JSON generator</a> is always enabled. Generated files are written to the <a href="qml-qbsprobes-conanfileprobe.html#generatedFilesPath-prop">generatedFilesPath</a> folder.</p>
<p>Default: [&quot;json&quot;]</p>
<p><b>See also </b><a href="https://docs.conan.io/en/latest/reference/generators.html">Available generators</a>.</p>
</div></div><!-- @@@generators -->
<br/>
<!-- $$$json -->
<div class="qmlitem"><div class="qmlproto">
<div class="table"><table class="qmlname">
<tr valign="top" class="odd" id="json-prop">
<td class="tblQmlPropNode"><p>
<a name="json-prop"></a><span class="qmlreadonly">[read-only] </span><span class="name">json</span> : <span class="type">var</span></p></td></tr>
</table></div></div>
<div class="qmldoc"><p>The parsed output of Conan's <a href="https://docs.conan.io/en/latest/reference/generators/json.html">JSON generator</a> as a JavaScript object.</p>
<p>Default: Undefined</p>
</div></div><!-- @@@json -->
<br/>
<!-- $$$options -->
<div class="qmlitem"><div class="qmlproto">
<div class="table"><table class="qmlname">
<tr valign="top" class="odd" id="options-prop">
<td class="tblQmlPropNode"><p>
<a name="options-prop"></a><span class="name">options</span> : <span class="type">var</span></p></td></tr>
</table></div></div>
<div class="qmldoc"><p>Options applied to <code>conan install</code> via the <code>-o</code> flag. This property is an object in the form <code>key:value</code>.</p>
<p>Example:</p>
<pre class="qml">options: ({someOpt: &quot;True&quot;, someOtherOpt: &quot;TheValue&quot;})</pre>
<p>Default: Undefined</p>
</div></div><!-- @@@options -->
<br/>
<!-- $$$packageReference -->
<div class="qmlitem"><div class="qmlproto">
<div class="table"><table class="qmlname">
<tr valign="top" class="odd" id="packageReference-prop">
<td class="tblQmlPropNode"><p>
<a name="packageReference-prop"></a><span class="name">packageReference</span> : <span class="type">string</span></p></td></tr>
</table></div></div>
<div class="qmldoc"><p>Reference of a Conan package in the form <code>name/version@user/channel</code>. Use this property if you want to probe an existing package in the local cache or on a remote.</p>
<p>This property cannot be set at the same time as <a href="qml-qbsprobes-conanfileprobe.html#conanfilePath-prop">conanfilePath</a>.</p>
<p>Default: Undefined</p>
</div></div><!-- @@@packageReference -->
<br/>
<!-- $$$settings -->
<div class="qmlitem"><div class="qmlproto">
<div class="table"><table class="qmlname">
<tr valign="top" class="odd" id="settings-prop">
<td class="tblQmlPropNode"><p>
<a name="settings-prop"></a><span class="name">settings</span> : <span class="type">var</span></p></td></tr>
</table></div></div>
<div class="qmldoc"><p>Settings applied to <code>conan install</code> via the <code>-s</code> flag. This property is an object in the form <code>key:value</code>.</p>
<p>Example:</p>
<pre class="qml">settings: ({os: &quot;Linux&quot;, compiler: &quot;gcc&quot;})</pre>
<p>Default: Undefined</p>
</div></div><!-- @@@settings -->
<br/>
</body>
</html>
